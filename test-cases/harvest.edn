{:classifiers [{:ingester ["hull-ofx" :path], :path-glob "**.ofx"}
               {:hdr {:cur "GBP", :dialect "firstdirect"},
                :hdr-fn lima.harvest.core.account/infer-from-path,
                :ingester ["hull-csv" :path],
                :path-glob "**/firstdirect/**.csv"}],
 :realizers
   [[{:dialect "ofx1"}
     {:bal {:accid {:key :acctid, :src :hdr},
            :cur {:key :curdef, :src :hdr},
            :date {:fmt "yyyyMMdd", :key :dtasof, :src :hdr, :type :date},
            :units {:key :balamt, :src :hdr, :type :decimal}},
      :txn {:accid {:key :acctid, :src :hdr},
            :cur {:key :curdef, :src :hdr},
            :date {:fmt "yyyyMMdd", :key :dtposted, :src :txn, :type :date},
            :narration {:key :memo, :src :txn},
            :payee {:key :name, :src :txn},
            :txnid [{:key :acctid, :src :hdr} "." {:key :fitid, :src :hdr}],
            :units {:key:trnamt :src:txn, :type :decimal}}}]
    [{:dialect "firstdirect"}
     {:bal {:accid {:key :accid, :src :hdr},
            :cur {:key :cur, :src :hdr},
            :date {:fmt "dd/MM/yyyy", :key :date, :src :txn, :type :date},
            :units {:key :balance, :src :txn, :type :decimal}},
      :txn {:accid {:key :accid, :src :hdr},
            :cur {:key :cur, :src :hdr},
            :date {:fmt "dd/MM/yyyy", :key :date, :src :txn, :type :date},
            :description {:key :description, :src :hdr},
            :units {:key :amount, :src :txn, :type :decimal}},
      :txn-fn lima.harvest.contrib.firstdirect/payee-narration}]]}
